# 仓储管理系统 (WMS Demo)

一个功能完整的仓储管理系统演示版本，包含货物登记、库存管理、销售记录和毛利率计算等核心功能。

## 🎯 系统状态

✅ **已完成模块**：
- 🏗️ 后端API框架 (Express + TypeScript + SQLite)
- 🎨 前端界面框架 (React + TypeScript + Ant Design)
- 🗄️ 数据库设计与初始化
- 🔐 用户认证系统
- 📊 仪表板页面（响应式布局，美观展示）
- 📋 货品管理完整CRUD功能
- 📦 库存管理完整功能（查询、调拨、调整、预警）
- 💰 销售管理功能
- 👥 客户管理功能
- 🏪 供应商管理功能
- 🔧 TypeScript编译错误修复

🚧 **开发中模块**：
- 采购管理完整实现
- 高级报表分析功能

## 功能特性

### 核心模块
- 🏪 **主数据管理**: 货品档案、供应商、客户、仓库信息
- 📦 **采购管理**: 采购订单、入库管理、成本核算
- 📋 **库存管理**: 实时库存、调拨、盘点、预警
- �� **销售管理**: 销售订单、出库、毛利计算、客户管理
- 👥 **客户管理**: 客户档案、信用管理、联系信息、分类管理
- 🏪 **供应商管理**: 供应商档案、合作管理、财务信息、分类管理
- 📊 **财务分析**: 毛利率计算、进销存报表、资金流水
- 📈 **数据分析**: 可视化仪表板、销售分析、库存周转

### 已实现功能展示
1. **仪表板**
   - 响应式布局设计，支持移动端
   - 实时KPI指标展示（今日销售、毛利润、库存价值等）
   - 销售趋势图表分析
   - 库存预警提醒

2. **货品管理**
   - 完整的CRUD操作（新增、编辑、删除、查询）
   - 分页和搜索功能
   - 实时毛利率计算
   - 表格固定列和响应式设计
   - 表单验证和用户体验优化

3. **库存管理**
   - 🔍 **库存查询**: 实时库存状态展示，支持按仓库、货品筛选
   - 📊 **库存状态**: 自动识别缺货、不足、正常、过多状态
   - 🔄 **库存调拨**: 仓库间货品转移，自动更新库存
   - ⚖️ **库存调整**: 支持正负调整，自动记录调整原因
   - 🚨 **库存预警**: 自动监控最小/最大库存，实时预警提示
   - 📈 **交易记录**: 完整的出入库流水，可追溯所有变动
   - 🎯 **多维筛选**: 按仓库、货品、状态等多条件过滤
   - 📱 **响应式设计**: 支持移动端操作

### 技术栈
- **前端**: React 18 + TypeScript + Vite + Ant Design
- **后端**: Node.js + Express + TypeScript
- **数据库**: SQLite (本地文件数据库)
- **状态管理**: Redux Toolkit
- **图表**: ECharts + AntV G2

## 快速开始

### 环境要求
- Node.js >= 16.x
- npm >= 8.x

### 方式一：使用演示脚本（推荐）

```bash
# 给脚本执行权限
chmod +x start-demo.sh

# 启动演示系统
./start-demo.sh
```

### 方式二：手动启动

```bash
# 1. 安装所有依赖
npm run install:all

# 2. 初始化数据库
cd backend && npm run db:init && cd ..

# 3. 构建后端
cd backend && npm run build && cd ..

# 4. 启动后端服务（新终端窗口）
cd backend && node dist/index.js &

# 5. 启动前端服务（新终端窗口）
cd frontend && npm run dev
```

### 访问地址
- **前端应用**: http://localhost:5173
- **后端API**: http://localhost:3001

### 默认登录账户
- **用户名**: admin
- **密码**: 123456

## 项目结构

```
warehouse-management-system/
├── frontend/                 # 前端React应用
│   ├── src/
│   │   ├── components/      # 通用组件
│   │   ├── pages/          # 页面组件
│   │   ├── store/          # Redux状态管理
│   │   ├── services/       # API服务
│   │   └── utils/          # 工具函数
├── backend/                 # 后端Express应用
│   ├── src/
│   │   ├── controllers/    # 控制器
│   │   ├── models/         # 数据模型
│   │   ├── routes/         # 路由定义
│   │   ├── middleware/     # 中间件
│   │   └── database/       # 数据库初始化
├── database/               # SQLite数据库文件
└── docs/                   # 文档
```

## 功能演示

### 1. 用户登录
- 访问 http://localhost:5173
- 使用默认账户 admin / 123456 登录

### 2. 仪表板
- 查看核心业务指标
- 实时销售和库存数据
- 图表分析展示
- 响应式布局适配

### 3. 货品管理
- 📋 查看货品列表（分页、搜索）
- ➕ 新增货品信息
- ✏️ 编辑货品资料
- 🗑️ 删除货品记录
- 📊 实时毛利率计算
- 🏷️ 货品状态管理

### 4. 客户管理（✅ 已完成）
- 客户档案完整CRUD管理
- 客户类型分类（零售/批发/企业客户）
- 联系信息管理（联系人、电话、邮箱、地址）
- 信用额度设置与管理
- 付款条件配置
- 客户状态管理（活跃/停用/待审核）
- 多条件搜索与筛选

### 5. 供应商管理（✅ 已完成）
- 供应商档案完整CRUD管理
- 供应商类型分类（生产商/分销商/零售商/服务商）
- 联系信息管理（联系人、电话、邮箱、地址）
- 银行账户和税号管理
- 付款条件配置
- 供应商状态管理（合作中/停用/待审核/暂停）
- 多条件搜索与筛选

### 6. 库存管理（✅ 已完成）
- 📦 **库存查询**: 查看所有货品的实时库存情况
- 🔍 **多维筛选**: 按仓库、货品、库存状态筛选
- 🔄 **库存调拨**: 在不同仓库间转移货品
- ⚖️ **库存调整**: 手动调整库存数量（盘点、损耗等）
- 🚨 **预警监控**: 自动显示库存不足和过量预警
- 📈 **交易记录**: 查看完整的出入库流水记录
- 🎯 **状态标识**: 缺货、不足、正常、过多状态一目了然

### 7. 业务流程（开发中）
- 采购订单→入库→库存管理
- 销售订单→出库→财务结算
- 毛利率实时计算

## 数据库设计

### 核心表结构
- `users` - 用户表
- `items` - 货品表
- `suppliers` - 供应商表
- `customers` - 客户表
- `warehouses` - 仓库表
- `purchase_orders` - 采购订单表
- `sales_orders` - 销售订单表
- `inventory` - 库存表
- `inventory_transactions` - 库存交易流水表

### 示例数据
系统会自动创建示例数据，包括：
- 2个仓库（主仓库、分仓库）
- 2个供应商（格力电器华北总代理、美的集团上海分销商）
- 2个客户（苏宁易购北京旗舰店、国美电器批发部）
- 4个货品（格力1.5匹变频空调、海信65英寸4K智能电视、小天鹅10公斤变频洗衣机、美的516升对开门冰箱）

## API接口

### 认证接口
- `POST /api/auth/login` - 用户登录
- `GET /api/auth/me` - 获取当前用户信息

### 业务接口
- `GET /api/items` - 获取货品列表
- `POST /api/items` - 创建货品
- `PUT /api/items/:id` - 更新货品
- `DELETE /api/items/:id` - 删除货品
- `GET /api/suppliers` - 获取供应商列表
- `GET /api/customers` - 获取客户列表
- `GET /api/inventory` - 查询库存
- `POST /api/inventory/transfer` - 库存调拨
- `POST /api/inventory/adjust` - 库存调整
- `GET /api/inventory/transactions` - 获取库存交易记录
- `GET /api/inventory/alerts` - 获取库存预警
- `GET /api/reports/dashboard` - 获取仪表板数据

详细API文档请参考各路由文件。

## 开发指南

### 添加新功能
1. 后端：在 `backend/src/routes/` 添加新路由
2. 前端：在 `frontend/src/pages/` 添加新页面
3. 更新导航：修改 `frontend/src/components/Layout.tsx`

### 数据库修改
1. 修改 `backend/src/database/init.ts`
2. 重新运行 `npm run db:init`

### 构建生产版本
```bash
# 构建前端
cd frontend && npm run build

# 构建后端
cd backend && npm run build

# 启动生产服务器
cd backend && npm run start
```

## 故障排除

### 后端启动失败
1. 检查Node.js版本是否>=16.x
2. 确认数据库初始化是否成功
3. 查看端口3001是否被占用
4. 检查TypeScript编译错误

### 前端页面无法访问
1. 确认Vite开发服务器是否启动
2. 检查端口5173是否被占用
3. 确认后端API是否正常响应

### 数据库相关问题
```bash
# 重新初始化数据库
cd backend
rm -f database/wms.db
npm run db:init
```

### TypeScript编译错误
```bash
# 重新构建后端
cd backend
npm run build
```

## 最新更新

### v1.5 (2025-07-14)
- ✅ 完善供应商管理完整功能模块
- ✅ 实现供应商档案CRUD操作
- ✅ 添加供应商类型分类管理（生产商/分销商/零售商/服务商）
- ✅ 完善联系信息管理（联系人、电话、邮箱、地址）
- ✅ 实现银行账户和税号管理
- ✅ 添加供应商状态管理和多条件搜索
- ✅ 优化表格显示和用户体验
- ✅ 确保不影响其他模块的数据获取功能

### v1.4 (2025-07-14)
- ✅ 将所有示例数据改为家电类别（空调、电视、洗衣机、冰箱）
- ✅ 使用具体品牌和型号（格力、海信、小天鹅、美的）
- ✅ 更新供应商和客户信息为家电行业相关
- ✅ 调整价格体系以符合家电市场实际情况
- ✅ 修复前端TypeScript编译错误
- ✅ 优化库存数据和交易记录

### v1.2 (2025-07-14)
- ✅ 完善库存管理完整功能模块
- ✅ 实现库存查询、调拨、调整功能
- ✅ 添加库存预警和交易记录功能
- ✅ 优化库存状态标识和筛选功能
- ✅ 添加完整的库存示例数据
- ✅ 改进响应式设计和用户体验

### v1.1 (2025-07-14)
- ✅ 修复后端TypeScript编译错误
- ✅ 优化仪表板布局和响应式设计
- ✅ 完善货品管理完整CRUD功能
- ✅ 改进用户体验和界面美观度
- ✅ 添加实时毛利率计算显示
- ✅ 优化表格和表单组件
- ✅ 修复路由认证和API调用问题

## 后续开发计划

### Phase 1: 完善基础功能
- [ ] 完整的供应商/客户管理CRUD
- [ ] 基础库存查询和操作

### Phase 2: 业务流程
- [ ] 完整的采购流程
- [ ] 完整的销售流程
- [ ] 库存调拨和盘点

### Phase 3: 高级功能
- [ ] 详细的报表分析
- [ ] 多仓库支持
- [ ] 权限管理系统

### Phase 4: 优化改进
- [ ] 移动端适配
- [ ] 性能优化
- [ ] 数据导入导出

## 技术支持

如有问题或建议，请：
1. 查看故障排除章节
2. 检查浏览器控制台错误信息
3. 查看后端服务器日志

## 许可证

MIT License

---

**注意**: 这是一个演示版本，主要用于展示系统架构和核心功能。在生产环境中使用前，请进行安全审计和性能优化。 